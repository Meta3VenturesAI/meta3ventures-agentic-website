import{j as e}from"./index-CIzmM8sf.js";import{r as s}from"./router-Bf3h2-TO.js";import{f as r}from"./MultiStepApplication-B0kZ-fNc.js";import{I as a,J as t,C as n,i as l,K as o,O as i,Q as d,V as c}from"./icons-CrFATGyQ.js";import"./react-vendor-eVk5PToZ.js";import"./supabase-BhLMWRjL.js";import"./ui-vendor-BqqUpcLC.js";import"./data-storage.service-Ckam529i.js";import"./supabase-gsyK_hHB.js";const u=({id:u,label:g,accept:m=[".pdf",".doc",".docx",".ppt",".pptx"],maxSize:x=10,maxFiles:p=3,value:h=[],onChange:f,onError:j,disabled:b=!1,required:v=!1,helperText:y})=>{const[k,N]=s.useState(!1),[M,w]=s.useState([]),S=s.useRef(null),C=s.useCallback(e=>{e.preventDefault(),e.stopPropagation(),b||N(!0)},[b]),$=s.useCallback(e=>{e.preventDefault(),e.stopPropagation(),N(!1)},[]),D=s.useCallback(e=>{e.preventDefault(),e.stopPropagation()},[]),F=s.useCallback(e=>{if(e.preventDefault(),e.stopPropagation(),N(!1),b)return;const s=Array.from(e.dataTransfer.files);R(s)},[b]),P=s.useCallback(e=>{const s=e.target.files?Array.from(e.target.files):[];R(s)},[]),R=s.useCallback(e=>{if(h.length+e.length>p)return void j?.(`Maximum ${p} files allowed`);const s=[],a=[];e.forEach(e=>{const t=r.validateFile(e,{maxSize:1024*x*1024,allowedTypes:m});if(t)j?.(t),a.push({file:e,progress:0,status:"error",error:t});else{let r;s.push(e),e.type.startsWith("image/")&&(r=URL.createObjectURL(e)),a.push({file:e,preview:r,progress:0,status:"uploading"})}}),a.forEach((e,s)=>{"uploading"===e.status&&B(e)}),w(e=>[...e,...a]),f([...h,...s])},[h,p,x,m,f,j]),B=(e,s)=>{const r=setInterval(()=>{w(s=>{const a=[...s],t=a.find(s=>s.file===e.file);return t&&"uploading"===t.status&&(t.progress=Math.min(t.progress+10,100),100===t.progress&&(t.status="success",clearInterval(r))),a})},200)},K=s.useCallback(e=>{w(s=>s.filter(s=>s.file!==e)),f(h.filter(s=>s!==e));const s=M.find(s=>s.file===e);s?.preview&&URL.revokeObjectURL(s.preview)},[h,f,M]),U=e=>{if(0===e)return"0 Bytes";const s=Math.floor(Math.log(e)/Math.log(1024));return Math.round(e/Math.pow(1024,s)*100)/100+" "+["Bytes","KB","MB","GB"][s]};return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:[g," ",v&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:`\n          relative border-2 border-dashed rounded-lg p-6 transition-all\n          ${k?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/20":"border-gray-300 dark:border-gray-600 hover:border-gray-400"}\n          ${b?"opacity-50 cursor-not-allowed":"cursor-pointer"}\n        `,onDragEnter:C,onDragOver:D,onDragLeave:$,onDrop:F,onClick:()=>!b&&S.current?.click(),children:[e.jsx("input",{ref:S,type:"file",id:u,multiple:p>1,accept:m.join(","),onChange:P,disabled:b,className:"hidden"}),e.jsxs("div",{className:"text-center",children:[e.jsx(a,{className:"mx-auto h-12 w-12 text-gray-400 mb-3"}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.jsx("span",{className:"font-medium",children:"Click to upload"})," or drag and drop"]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[m.map(e=>e.toUpperCase()).join(", ")," up to ",x,"MB"]}),p>1&&e.jsxs("p",{className:"text-xs text-gray-500",children:["Maximum ",p," files"]})]})]}),y&&e.jsx("p",{className:"text-sm text-gray-500",children:y}),M.length>0&&e.jsx("div",{className:"space-y-2 mt-4",children:M.map((s,r)=>{const a=(u=s.file).type.startsWith("image/")?i:u.type.includes("pdf")?d:c;var u;return e.jsxs("div",{className:`\n                  flex items-center p-3 rounded-lg border\n                  ${"error"===s.status?"border-red-300 bg-red-50":"border-gray-200 bg-gray-50 dark:border-gray-700 dark:bg-gray-800"}\n                `,children:[e.jsx("div",{className:"flex-shrink-0 mr-3",children:s.preview?e.jsx("img",{src:s.preview,alt:s.file.name,className:"w-10 h-10 rounded object-cover"}):e.jsx(a,{className:"w-10 h-10 text-gray-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:s.file.name}),e.jsx("p",{className:"text-xs text-gray-500",children:U(s.file.size)}),"uploading"===s.status&&e.jsx("div",{className:"mt-1",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-1",children:e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1",children:e.jsx("div",{className:"bg-indigo-600 h-1 rounded-full transition-all",style:{width:`${s.progress}%`}})})}),e.jsxs("span",{className:"ml-2 text-xs text-gray-500",children:[s.progress,"%"]})]})}),s.error&&e.jsx("p",{className:"text-xs text-red-600 mt-1",children:s.error})]}),e.jsxs("div",{className:"flex-shrink-0 ml-3",children:["uploading"===s.status&&e.jsx(t,{className:"w-5 h-5 text-indigo-600 animate-spin"}),"success"===s.status&&e.jsx(n,{className:"w-5 h-5 text-green-600"}),"error"===s.status&&e.jsx(l,{className:"w-5 h-5 text-red-600"})]}),"uploading"!==s.status&&e.jsx("button",{type:"button",onClick:e=>{e.stopPropagation(),K(s.file)},className:"flex-shrink-0 ml-2 p-1 rounded hover:bg-gray-200 dark:hover:bg-gray-700",children:e.jsx(o,{className:"w-4 h-4 text-gray-500"})})]},r)})}),h.length>0&&e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[h.length," of ",p," file",p>1?"s":""," uploaded"]})]})},g=({formData:s,errors:r,touchedFields:a,onFieldChange:t,onFieldTouch:n,onFieldBlur:l})=>{const o=e=>{const{name:s,value:r}=e.target;t(s,r),n(s)},i=e=>{l(e)},d=e=>s=>{t(e,s)};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Market & Funding"}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Target Market *",e.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["(",s.targetMarket?.length||0,"/1500 characters, min. 50)"]})]}),e.jsx("textarea",{name:"targetMarket",value:s.targetMarket||"",onChange:o,onBlur:()=>i("targetMarket"),rows:4,required:!0,maxLength:1500,placeholder:"Describe your target market, customer segments, and market size. Who are your customers? (minimum 50 characters)",className:"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent\n            "+(a.has("targetMarket")&&r.targetMarket?"border-red-500":a.has("targetMarket")&&(s.targetMarket?.length||0)>=50?"border-green-500":"border-gray-300")}),a.has("targetMarket")&&r.targetMarket&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.targetMarket})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Revenue Status"}),e.jsxs("select",{name:"revenueStatus",value:s.revenueStatus||"",onChange:o,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Select Status"}),e.jsx("option",{value:"pre-revenue",children:"Pre-Revenue"}),e.jsx("option",{value:"0-100k",children:"$0 - $100K ARR"}),e.jsx("option",{value:"100k-500k",children:"$100K - $500K ARR"}),e.jsx("option",{value:"500k-1m",children:"$500K - $1M ARR"}),e.jsx("option",{value:"1m+",children:"$1M+ ARR"})]}),s.revenueStatus&&"pre-revenue"!==s.revenueStatus&&e.jsxs("div",{className:"col-span-2 mt-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Revenue Details"}),e.jsx("input",{type:"text",name:"revenueDetails",value:s.revenueDetails||"",onChange:o,placeholder:"Monthly recurring revenue, growth rate, etc.",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Users/Customers"}),e.jsx("input",{type:"text",name:"currentUsers",value:s.currentUsers||"",onChange:o,placeholder:"Number of users/customers",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Funding Sought *"}),e.jsxs("select",{name:"fundingSought",value:s.fundingSought||"",onChange:o,onBlur:()=>i("fundingSought"),required:!0,className:"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent\n              "+(a.has("fundingSought")&&r.fundingSought?"border-red-500":a.has("fundingSought")&&s.fundingSought?"border-green-500":"border-gray-300"),children:[e.jsx("option",{value:"",children:"Select Amount"}),e.jsx("option",{value:"100k-250k",children:"$100K - $250K"}),e.jsx("option",{value:"250k-500k",children:"$250K - $500K"}),e.jsx("option",{value:"500k-1m",children:"$500K - $1M"}),e.jsx("option",{value:"1m-2m",children:"$1M - $2M"}),e.jsx("option",{value:"2m-5m",children:"$2M - $5M"}),e.jsx("option",{value:"5m+",children:"$5M+"})]}),a.has("fundingSought")&&r.fundingSought&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.fundingSought})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Previous Funding"}),e.jsxs("select",{name:"previousFunding",value:s.previousFunding||"",onChange:o,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"none",children:"No Previous Funding"}),e.jsx("option",{value:"friends-family",children:"Friends & Family"}),e.jsx("option",{value:"angel",children:"Angel Investment"}),e.jsx("option",{value:"pre-seed",children:"Pre-Seed Round"}),e.jsx("option",{value:"seed",children:"Seed Round"}),e.jsx("option",{value:"series-a",children:"Series A"}),e.jsx("option",{value:"grants",children:"Grants"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Use of Funds"}),e.jsx("textarea",{name:"useOfFunds",value:s.useOfFunds||"",onChange:o,rows:3,placeholder:"How will you use the funding? (e.g., product development, team expansion, marketing, etc.)",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Business Model"}),e.jsx("textarea",{name:"businessModel",value:s.businessModel||"",onChange:o,rows:3,placeholder:"Describe your revenue model and go-to-market strategy.",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),e.jsxs("div",{className:"space-y-6 bg-gray-50 p-6 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Supporting Documents"}),e.jsx("div",{children:e.jsx(u,{id:"pitchDeck",label:"Pitch Deck",accept:[".pdf",".ppt",".pptx"],maxSize:10,maxFiles:1,value:s.pitchDeck,onChange:d("pitchDeck"),helperText:"Upload your pitch deck (PDF or PowerPoint, max 10MB)"})}),e.jsx("div",{children:e.jsx(u,{id:"businessPlan",label:"Business Plan (Optional)",accept:[".pdf",".doc",".docx"],maxSize:10,maxFiles:1,value:s.businessPlan,onChange:d("businessPlan"),helperText:"Upload your business plan if available (PDF or Word, max 10MB)"})})]})]})};export{g as MarketFundingStep,g as default};

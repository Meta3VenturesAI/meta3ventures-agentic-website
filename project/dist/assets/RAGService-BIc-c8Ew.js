var e=Object.defineProperty,t=(t,a,n)=>((t,a,n)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[a]=n)(t,"symbol"!=typeof a?a+"":a,n);class a{constructor(){t(this,"documents",new Map),t(this,"embeddings",new Map),t(this,"isInitialized",!1),this.initializeDatabase().catch(e=>{})}async initializeDatabase(){if(!this.isInitialized)try{await this.loadInitialDocuments(),this.generateEmbeddings().catch(e=>{}),this.isInitialized=!0}catch{throw error}}async loadInitialDocuments(){[{content:"Meta3Ventures Investment Criteria: We focus on early-stage investments in AI, blockchain, and emerging technologies. \n        Investment Range: $100K - $2M. Stage: Pre-seed to Series A. Sectors: AI/ML, Blockchain, FinTech, SaaS, HealthTech.\n        We look for strong founding teams, innovative technology, and large addressable markets.",metadata:{title:"Meta3Ventures Investment Criteria",category:"investment",source:"meta3ventures",timestamp:new Date("2024-01-01"),tags:["investment","criteria","ai","blockchain","funding","startup"]}},{content:"AI Market Trends 2024: Key trends include 1) Generative AI Enterprise Adoption - 60% of enterprises implementing GenAI solutions. \n        2) AI Infrastructure Investment - $50B+ in AI infrastructure spending. 3) Regulatory Development - EU AI Act implementation.\n        4) Edge AI Computing - Moving AI processing closer to data sources. 5) AI Ethics and Governance - Focus on responsible AI development.",metadata:{title:"AI Market Trends 2024",category:"market-research",source:"industry-reports",timestamp:new Date("2024-01-15"),tags:["ai","trends","2024","market","generative","enterprise"]}},{content:"Startup Funding Stages Guide: PRE-SEED ($50K - $500K) - Validate product-market fit, build MVP, initial team. \n        SEED ($500K - $3M) - Proven traction, initial revenue, product development. SERIES A ($3M - $15M) - Strong revenue growth, market validation, scaling.\n        SERIES B ($15M - $50M) - Market expansion, team scaling, operational efficiency. SERIES C+ ($50M+) - Market leadership, international expansion.",metadata:{title:"Startup Funding Stages Guide",category:"funding",source:"venture-capital",timestamp:new Date("2024-01-10"),tags:["funding","stages","startup","seed","series-a","investment"]}},{content:"Business Plan Structure: A comprehensive business plan should include: 1) Executive Summary - Company overview and key highlights.\n        2) Market Analysis - Industry size, growth, competition, target customers. 3) Business Model - Revenue streams, pricing, unit economics.\n        4) Product/Service Description - Features, benefits, competitive advantages. 5) Team - Founders, advisors, organizational structure.\n        6) Financial Projections - Revenue, expenses, funding requirements. 7) Go-to-Market Strategy - Marketing, sales, customer acquisition.",metadata:{title:"Business Plan Structure",category:"business-planning",source:"startup-guides",timestamp:new Date("2024-01-05"),tags:["business","plan","structure","executive","summary","market"]}},{content:"Pitch Deck Essentials: Essential slides include: 1) Title Slide - Company name, tagline, contact info. 2) Problem - Market pain point being solved.\n        3) Solution - Your product/service offering. 4) Market Opportunity - TAM, SAM, SOM analysis. 5) Traction - Key metrics, milestones, validation.\n        6) Business Model - How you make money. 7) Competition - Competitive landscape and differentiation. 8) Team - Founders and key team members.\n        9) Financials - Revenue projections, funding ask. 10) Ask - What you need from investors.",metadata:{title:"Pitch Deck Essentials",category:"pitch-deck",source:"investor-guides",timestamp:new Date("2024-01-08"),tags:["pitch","deck","slides","presentation","investor","funding"]}},{content:"Startup Valuation Methods: Common methods include: 1) Revenue Multiples - 3-15x depending on industry and growth.\n        2) DCF Analysis - Discounted cash flow based on future projections. 3) Comparable Company Analysis - Similar companies' valuations.\n        4) Risk-Adjusted NPV - Net present value with risk adjustments. 5) Scorecard Method - Weighted factors for startup stage.\n        Consider growth rate, market size, competitive position, team strength, and technology differentiation.",metadata:{title:"Startup Valuation Methods",category:"valuation",source:"financial-analysis",timestamp:new Date("2024-01-12"),tags:["valuation","methods","revenue","multiples","dcf","startup"]}},{content:"Key Startup Metrics: Important metrics include: ARR (Annual Recurring Revenue) - Annualized subscription revenue.\n        MRR (Monthly Recurring Revenue) - Monthly subscription revenue. CAC (Customer Acquisition Cost) - Cost to acquire one customer.\n        LTV (Lifetime Value) - Total revenue from a customer over their lifetime. Churn Rate - Percentage of customers lost over time.\n        Runway - Months of operation with current cash. Monitor these regularly for business health and investor reporting.",metadata:{title:"Key Startup Metrics",category:"metrics",source:"startup-analytics",timestamp:new Date("2024-01-14"),tags:["kpi","metrics","arr","mrr","cac","ltv","churn"]}},{content:"Market Validation Strategies: Effective strategies include: 1) Customer Interviews - 30-50 minimum, structured questions.\n        2) Landing Page Validation - Test demand before building. 3) Pre-order Campaigns - Validate willingness to pay.\n        4) Pilot Programs - Limited release to test market fit. 5) A/B Testing - Compare different approaches.\n        6) MVP Testing - Minimum viable product with core features. Focus on real customer feedback and data-driven decisions.",metadata:{title:"Market Validation Strategies",category:"validation",source:"startup-methodology",timestamp:new Date("2024-01-16"),tags:["market","validation","customer","interviews","mvp","testing"]}},{content:"Fintech Market Analysis: The fintech market is valued at $162B globally with 16% annual growth. Key segments include:\n        Digital Payments ($89B), Digital Banking ($44B), InsurTech ($15B), RegTech ($8B), and WealthTech ($6B). \n        Major trends: Open Banking, Embedded Finance, DeFi, CBDCs, and AI-powered financial services.\n        Regulatory environment is evolving with PSD2, Open Banking, and digital asset regulations.",metadata:{title:"Fintech Market Analysis",category:"market-research",source:"industry-reports",timestamp:new Date("2024-01-18"),tags:["fintech","market","analysis","payments","banking","regulatory"]}},{content:"SaaS Business Model: Software as a Service model features: 1) Subscription Revenue - Recurring monthly/annual payments.\n        2) Freemium Strategy - Free tier with premium features. 3) Usage-Based Pricing - Pay per use or per seat.\n        4) Enterprise Sales - Custom solutions for large customers. 5) Channel Partnerships - Reseller and integration partners.\n        Key metrics: ARR, MRR, Churn Rate, CAC, LTV, Net Revenue Retention. Focus on product-market fit and customer success.",metadata:{title:"SaaS Business Model",category:"business-model",source:"saas-guides",timestamp:new Date("2024-01-20"),tags:["saas","business-model","subscription","freemium","enterprise"]}}].forEach((e,t)=>{const a={id:`doc-${t+1}`,...e};this.documents.set(a.id,a)})}async generateEmbeddings(){for(const[e,t]of this.documents.entries()){const a=this.generateSimpleEmbedding(t.content);this.embeddings.set(e,a)}}generateSimpleEmbedding(e){const t=e.toLowerCase().split(/\s+/),a={};t.forEach(e=>{a[e]=(a[e]||0)+1});const n=new Array(128).fill(0);Object.keys(a).forEach((e,i)=>{const s=a[e]/t.length;n[i%128]+=s});const i=Math.sqrt(n.reduce((e,t)=>e+t*t,0));return n.map(e=>e/i)}async addDocument(e){const t=`doc-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,a={id:t,...e};this.documents.set(t,a);const n=this.generateSimpleEmbedding(a.content);return this.embeddings.set(t,n),t}async search(e,t={}){const{topK:a=5,threshold:n=.1,category:i,includeMetadata:s=!0}=t,r=this.generateSimpleEmbedding(e),o=[];for(const[c,u]of this.embeddings.entries()){const e=this.documents.get(c);if(!e)continue;if(i&&e.metadata.category!==i)continue;const t=this.calculateCosineSimilarity(r,u);t>=n&&o.push({id:c,similarity:t})}o.sort((e,t)=>t.similarity-e.similarity);return o.slice(0,a).map((e,t)=>{const a=this.documents.get(e.id);return{document:s?a:{...a,metadata:{title:a.metadata.title,category:a.metadata.category,source:a.metadata.source,timestamp:a.metadata.timestamp,tags:a.metadata.tags}},similarity:e.similarity,rank:t+1}})}calculateCosineSimilarity(e,t){if(e.length!==t.length)return 0;let a=0,n=0,i=0;for(let s=0;s<e.length;s++)a+=e[s]*t[s],n+=e[s]*e[s],i+=t[s]*t[s];return a/(Math.sqrt(n)*Math.sqrt(i))}async getDocument(e){return this.documents.get(e)||null}async getAllDocuments(){return Array.from(this.documents.values())}async deleteDocument(e){const t=this.documents.delete(e);return this.embeddings.delete(e),t}async getStats(){const e={},t={};for(const a of this.documents.values())e[a.metadata.category]=(e[a.metadata.category]||0)+1,t[a.metadata.source]=(t[a.metadata.source]||0)+1;return{totalDocuments:this.documents.size,categories:e,sources:t}}}const n=class e{constructor(){t(this,"vectorDB"),t(this,"isInitialized",!1),this.vectorDB=new a}static getInstance(){return e.instance||(e.instance=new e),e.instance}async initialize(){if(!this.isInitialized)try{await Promise.race([this.vectorDB.initializeDatabase(),new Promise((e,t)=>setTimeout(()=>t(new Error("Vector DB initialization timeout")),5e3))]),this.isInitialized=!0}catch{this.isInitialized=!0}}async search(e){const t=Date.now();try{this.isInitialized||await this.initialize();const a={topK:e.topK||5,threshold:e.threshold||.1,category:e.category,includeMetadata:!1!==e.includeMetadata},n=await this.vectorDB.search(e.query,a),i=Date.now()-t;return{success:!0,data:{query:e.query,results:n,totalResults:n.length,processingTime:i,metadata:{timestamp:(new Date).toISOString(),category:e.category,threshold:a.threshold}}}}catch(a){return{success:!1,error:a instanceof Error?a.message:"Unknown error occurred"}}}async addKnowledge(e){try{this.isInitialized||await this.initialize();return{success:!0,id:await this.vectorDB.addDocument(e)}}catch(t){return{success:!1,error:t instanceof Error?t.message:"Unknown error occurred"}}}async getKnowledge(e){try{return this.isInitialized||await this.initialize(),await this.vectorDB.getDocument(e)}catch{return null}}async getAllKnowledge(){try{return this.isInitialized||await this.initialize(),await this.vectorDB.getAllDocuments()}catch{return[]}}async deleteKnowledge(e){try{return this.isInitialized||await this.initialize(),await this.vectorDB.deleteDocument(e)}catch{return!1}}async getStats(){try{this.isInitialized||await this.initialize();return{...await this.vectorDB.getStats(),lastUpdated:new Date}}catch{return{totalDocuments:0,categories:{},sources:{},lastUpdated:new Date}}}async searchByCategory(e,t,a=5){return this.search({query:t,category:e,topK:a,threshold:.1,includeMetadata:!0})}async searchFunding(e){return this.searchByCategory("funding",e,3)}async searchMarketResearch(e){return this.searchByCategory("market-research",e,3)}async searchInvestment(e){return this.searchByCategory("investment",e,3)}async searchBusinessPlanning(e){return this.searchByCategory("business-planning",e,3)}async searchValuation(e){return this.searchByCategory("valuation",e,3)}async searchMetrics(e){return this.searchByCategory("metrics",e,3)}async searchValidation(e){return this.searchByCategory("validation",e,3)}async searchPitchDeck(e){return this.searchByCategory("pitch-deck",e,3)}async contextualSearch(e,t,a=5){const n=`${e} ${t}`.trim();return this.search({query:n,context:t,topK:a,threshold:.15,includeMetadata:!0})}async multiCategorySearch(e,t,a=5){const n=[];for(const s of t){const t=await this.searchByCategory(s,e,a);t.success&&t.data&&n.push(...t.data.results)}n.sort((e,t)=>t.similarity-e.similarity);const i=n.slice(0,a);return{success:!0,data:{query:e,results:i,totalResults:i.length,processingTime:0,metadata:{timestamp:(new Date).toISOString(),category:t.join(","),threshold:.1}}}}};t(n,"instance");let i=n;export{i as RAGService};
